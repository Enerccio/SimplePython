class TestProxy(object):
    def __init__(self, proxy):
        self.proxy = proxy
        
    def run(self, x):
        try:
            print "inside proxy"
            return self.proxy.run(x)
        finally:
            print "outside proxy"

class Test(object):
    def __init__(self):
        return TestProxy(self)
    
    def run(self, x):
        print "x = ", x
        return "ok"

def test():
    print Test().run(10)