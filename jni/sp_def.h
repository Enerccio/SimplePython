#pragma once

typedef enum bytecode bytecode_t;

enum bytecode {
	// System
	NOP = 0, PUSH_ENVIRONMENT = 8, RESOLVE_CLOSURE = 10, PUSH_LOCAL_CONTEXT = 11, IMPORT = 
	12, RESOLVE_ARGS = 13, PUSH_FRAME = 15, PUSH_EXCEPTION = 16, OPEN_LOCALS = 
	17, PUSH_LOCALS = 18,

	// control
	POP = 31, PUSH = 32, CALL = 33, KCALL = 34, RCALL = 35, ECALL = 36, DUP = 37, SWAP_STACK = 
	38, JUMPIFTRUE = 39, JUMPIFFALSE = 40, JUMPIFNONE = 41, JUMPIFNORETURN = 
	42, GOTO = 43, RETURN = 44, SAVE_LOCAL = 45, TRUTH_VALUE = 46, MAKE_FIRST = 
	47,
	// variables
	LOAD = 64, LOADGLOBAL = 65, SAVE = 66, SAVEGLOBAL = 67, UNPACK_SEQUENCE = 68, LOADDYNAMIC = 
	69, SAVEDYNAMIC = 70, LOADBUILTIN = 71,
	// special call-related
	KWARG = 80, UNPACK_KWARG = 81, MAKE_FUTURE = 82, TEST_FUTURE = 83, LOAD_FUTURE = 
	84,
	// exceptions
	RAISE = 85, RERAISE = 86,
	// macros
	GETATTR = 89, SETATTR = 90, ISINSTANCE = 91,
	// frames
	YIELD = 96,
	// delete
	DEL = 104, DELATTR = 105,

	// loops, iterators, boolean stuff
	SETUP_LOOP = 128, GET_ITER = 129, ACCEPT_ITER = 130,

	// math macros
	ADD = 164, SUB = 165, MUL = 166, DIV = 167, MOD = 168, AND = 169, OR = 170, XOR = 
	171, POW = 172, RSHIFT = 173, LSHIFT = 174, LT = 175, LE = 176, GE = 177, GT = 
	178, EQ = 179, NE = 180, DCOLON = 181, QM = 182, RARROW = 183,

	// debugger only bytecodes
	D_STARTFUNC = 250, D_RETURN = 251
};